{% extends "base.html" %}
{% block title %}Checkout{% endblock %}

{% block content %}
  <style>
    .checkout-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      margin-top: 2rem;
    }

    .checkout-box {
      flex: 1 1 300px;
      background-color: #fff;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h2, h3 {
      margin-top: 0;
      color: #333;
    }

    ul {
      padding-left: 1.5rem;
    }

    li {
      margin-bottom: 0.5rem;
    }

    .total-price {
      font-weight: bold;
      font-size: 1.2rem;
      margin-top: 1rem;
    }

    .btn-primary {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 1rem;
    }

    .btn-primary:hover {
      background-color: #1e7e34;
    }

    .back-link {
      display: inline-block;
      margin-top: 1rem;
      color: #007bff;
      text-decoration: none;
    }

    .back-link:hover {
      text-decoration: underline;
    }
  </style>

  <h2>Checkout</h2>

  {% if cart_items %}
    <div class="checkout-container">
      <!-- Cart Summary -->
      <div class="checkout-box">
        <h3>Your Items</h3>
        <ul>
          {% for item in cart_items %}
            <li style="display: flex; align-items: center; margin-bottom: 1rem;">
              <img src="{{ item.image_url }}" alt="{{ item.name }}" class="checkout-item-image">
              <div>
                <strong>{{ item.name }}</strong> ({{ item.size }})<br>
                Qty: {{ item.quantity }} — ${{ "%.2f"|format(item.total_price) }}
              </div>
            </li>
{% endfor %}

        </ul>
        <p class="total-price">Total: ${{ "%.2f"|format(total) }}</p>
        <a href="{{ url_for('cart') }}" class="back-link">← Back to Cart</a>
      </div>

      <!-- Shipping Info + Order Button -->
      <div class="checkout-box">
        <h3>Shipping Info</h3>
        <p>{{ current_user.first_name }} {{ current_user.last_name }}</p>
        <p>{{ current_user.street }}</p>
        <p>{{ current_user.city }}, {{ current_user.state }} {{ current_user.zip }}</p>
        <p>{{ current_user.country }}</p>

        <form method="POST">
          <button type="submit" class="btn-primary">Place Order</button>
        </form>
      </div>
    </div>
  {% else %}
    <p>Your cart is empty.</p>
  {% endif %}
{% endblock %}
